"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/posts";
exports.ids = ["pages/api/posts"];
exports.modules = {

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/github":
/*!*********************************************!*\
  !*** external "next-auth/providers/github" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/github");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("zod");

/***/ }),

/***/ "(api)/./config/subscriptions.ts":
/*!*********************************!*\
  !*** ./config/subscriptions.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"freePlan\": () => (/* binding */ freePlan),\n/* harmony export */   \"proPlan\": () => (/* binding */ proPlan)\n/* harmony export */ });\nconst freePlan = {\n    name: \"Free\",\n    description: \"The free plan is limited to 3 posts. Upgrade to the PRO plan for unlimited posts.\",\n    stripePriceId: \"\"\n};\nconst proPlan = {\n    name: \"PRO\",\n    description: \"The PRO plan has unlimited posts.\",\n    stripePriceId: process.env.STRIPE_PRO_MONTHLY_PLAN_ID || \"\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25maWcvc3Vic2NyaXB0aW9ucy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUVPLE1BQU1BLFdBQTZCO0lBQ3hDQyxNQUFNO0lBQ05DLGFBQ0U7SUFDRkMsZUFBZTtBQUNqQixFQUFDO0FBRU0sTUFBTUMsVUFBNEI7SUFDdkNILE1BQU07SUFDTkMsYUFBYTtJQUNiQyxlQUFlRSxRQUFRQyxHQUFHLENBQUNDLDBCQUEwQixJQUFJO0FBQzNELEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkZW50LWRhc2hib2FyZC8uL2NvbmZpZy9zdWJzY3JpcHRpb25zLnRzPzc4ZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3Vic2NyaXB0aW9uUGxhbiB9IGZyb20gXCJ0eXBlc1wiXG5cbmV4cG9ydCBjb25zdCBmcmVlUGxhbjogU3Vic2NyaXB0aW9uUGxhbiA9IHtcbiAgbmFtZTogXCJGcmVlXCIsXG4gIGRlc2NyaXB0aW9uOlxuICAgIFwiVGhlIGZyZWUgcGxhbiBpcyBsaW1pdGVkIHRvIDMgcG9zdHMuIFVwZ3JhZGUgdG8gdGhlIFBSTyBwbGFuIGZvciB1bmxpbWl0ZWQgcG9zdHMuXCIsXG4gIHN0cmlwZVByaWNlSWQ6IFwiXCIsXG59XG5cbmV4cG9ydCBjb25zdCBwcm9QbGFuOiBTdWJzY3JpcHRpb25QbGFuID0ge1xuICBuYW1lOiBcIlBST1wiLFxuICBkZXNjcmlwdGlvbjogXCJUaGUgUFJPIHBsYW4gaGFzIHVubGltaXRlZCBwb3N0cy5cIixcbiAgc3RyaXBlUHJpY2VJZDogcHJvY2Vzcy5lbnYuU1RSSVBFX1BST19NT05USExZX1BMQU5fSUQgfHwgXCJcIixcbn1cbiJdLCJuYW1lcyI6WyJmcmVlUGxhbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInN0cmlwZVByaWNlSWQiLCJwcm9QbGFuIiwicHJvY2VzcyIsImVudiIsIlNUUklQRV9QUk9fTU9OVEhMWV9QTEFOX0lEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./config/subscriptions.ts\n");

/***/ }),

/***/ "(api)/./lib/api-middlewares/with-methods.ts":
/*!*********************************************!*\
  !*** ./lib/api-middlewares/with-methods.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"withMethods\": () => (/* binding */ withMethods)\n/* harmony export */ });\nfunction withMethods(methods, handler) {\n    return async function(req, res) {\n        if (req.method && !methods.includes(req.method)) {\n            return res.status(405).end();\n        }\n        return handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXBpLW1pZGRsZXdhcmVzL3dpdGgtbWV0aG9kcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsWUFBWUMsT0FBaUIsRUFBRUMsT0FBdUIsRUFBRTtJQUN0RSxPQUFPLGVBQWdCQyxHQUFtQixFQUFFQyxHQUFvQixFQUFFO1FBQ2hFLElBQUlELElBQUlFLE1BQU0sSUFBSSxDQUFDSixRQUFRSyxRQUFRLENBQUNILElBQUlFLE1BQU0sR0FBRztZQUMvQyxPQUFPRCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsR0FBRztRQUM1QixDQUFDO1FBRUQsT0FBT04sUUFBUUMsS0FBS0M7SUFDdEI7QUFDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGVudC1kYXNoYm9hcmQvLi9saWIvYXBpLW1pZGRsZXdhcmVzL3dpdGgtbWV0aG9kcy50cz9lZWNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaUhhbmRsZXIsIE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiXG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTWV0aG9kcyhtZXRob2RzOiBzdHJpbmdbXSwgaGFuZGxlcjogTmV4dEFwaUhhbmRsZXIpIHtcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICAgIGlmIChyZXEubWV0aG9kICYmICFtZXRob2RzLmluY2x1ZGVzKHJlcS5tZXRob2QpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZCgpXG4gICAgfVxuXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ3aXRoTWV0aG9kcyIsIm1ldGhvZHMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiaW5jbHVkZXMiLCJzdGF0dXMiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/api-middlewares/with-methods.ts\n");

/***/ }),

/***/ "(api)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authOptions\": () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/github */ \"next-auth/providers/github\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(api)/./lib/db.ts\");\n\n\n\n// TODO: Move env vars to env a la t3.\n// const postmarkClient = new Client(process.env.POSTMARK_API_TOKEN || '');\nconst authOptions = {\n    // huh any! I know.\n    // This is a temporary fix for prisma client.\n    // @see https://github.com/prisma/prisma/issues/16117\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_lib_db__WEBPACK_IMPORTED_MODULE_2__.db),\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/login\"\n    },\n    providers: [\n        next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GITHUB_CLIENT_ID || \"\",\n            clientSecret: process.env.GITHUB_CLIENT_SECRET || \"\"\n        })\n    ],\n    callbacks: {\n        async session ({ token , session  }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.name = token.name;\n                session.user.email = token.email;\n                session.user.image = token.picture;\n            }\n            return session;\n        },\n        async jwt ({ token , user  }) {\n            const dbUser = await _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.user.findFirst({\n                where: {\n                    email: token.email\n                }\n            });\n            if (!dbUser) {\n                if (user) {\n                    token.id = user?.id;\n                }\n                return token;\n            }\n            return {\n                id: dbUser.id,\n                name: dbUser.name,\n                email: dbUser.email,\n                picture: dbUser.image\n            };\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXV0aC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEQ7QUFHRjtBQUkxQjtBQUU5QixzQ0FBc0M7QUFDdEMsMkVBQTJFO0FBRXBFLE1BQU1HLGNBQStCO0lBQ3pDLG1CQUFtQjtJQUNuQiw2Q0FBNkM7SUFDN0MscURBQXFEO0lBQ3JEQyxTQUFTSix3RUFBYUEsQ0FBQ0UsdUNBQUVBO0lBQ3pCRyxTQUFTO1FBQ05DLFVBQVU7SUFDYjtJQUNBQyxPQUFPO1FBQ0pDLFFBQVE7SUFDWDtJQUNBQyxXQUFXO1FBQ1JSLGlFQUFjQSxDQUFDO1lBQ1pTLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCLElBQUk7WUFDMUNDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CLElBQUk7UUFDckQ7S0EyQ0Y7SUFDREMsV0FBVztRQUNSLE1BQU1YLFNBQVEsRUFBRVksTUFBSyxFQUFFWixRQUFPLEVBQUUsRUFBRTtZQUMvQixJQUFJWSxPQUFPO2dCQUNSWixRQUFRYSxJQUFJLENBQUNDLEVBQUUsR0FBR0YsTUFBTUUsRUFBRTtnQkFDMUJkLFFBQVFhLElBQUksQ0FBQ0UsSUFBSSxHQUFHSCxNQUFNRyxJQUFJO2dCQUM5QmYsUUFBUWEsSUFBSSxDQUFDRyxLQUFLLEdBQUdKLE1BQU1JLEtBQUs7Z0JBQ2hDaEIsUUFBUWEsSUFBSSxDQUFDSSxLQUFLLEdBQUdMLE1BQU1NLE9BQU87WUFDckMsQ0FBQztZQUVELE9BQU9sQjtRQUNWO1FBQ0EsTUFBTW1CLEtBQUksRUFBRVAsTUFBSyxFQUFFQyxLQUFJLEVBQUUsRUFBRTtZQUN4QixNQUFNTyxTQUFTLE1BQU12QixzREFBaUIsQ0FBQztnQkFDcEN5QixPQUFPO29CQUNKTixPQUFPSixNQUFNSSxLQUFLO2dCQUNyQjtZQUNIO1lBRUEsSUFBSSxDQUFDSSxRQUFRO2dCQUNWLElBQUlQLE1BQU07b0JBQ1BELE1BQU1FLEVBQUUsR0FBR0QsTUFBTUM7Z0JBQ3BCLENBQUM7Z0JBQ0QsT0FBT0Y7WUFDVixDQUFDO1lBRUQsT0FBTztnQkFDSkUsSUFBSU0sT0FBT04sRUFBRTtnQkFDYkMsTUFBTUssT0FBT0wsSUFBSTtnQkFDakJDLE9BQU9JLE9BQU9KLEtBQUs7Z0JBQ25CRSxTQUFTRSxPQUFPSCxLQUFLO1lBQ3hCO1FBQ0g7SUFDSDtBQUNILEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkZW50LWRhc2hib2FyZC8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gJ0BuZXh0LWF1dGgvcHJpc21hLWFkYXB0ZXInO1xuaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBFbWFpbFByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZW1haWwnO1xuaW1wb3J0IEdpdEh1YlByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZ2l0aHViJztcbmltcG9ydCB7IENsaWVudCB9IGZyb20gJ3Bvc3RtYXJrJztcblxuaW1wb3J0IHsgc2l0ZUNvbmZpZyB9IGZyb20gJ0AvY29uZmlnL3NpdGUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9kYic7XG5cbi8vIFRPRE86IE1vdmUgZW52IHZhcnMgdG8gZW52IGEgbGEgdDMuXG4vLyBjb25zdCBwb3N0bWFya0NsaWVudCA9IG5ldyBDbGllbnQocHJvY2Vzcy5lbnYuUE9TVE1BUktfQVBJX1RPS0VOIHx8ICcnKTtcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gICAvLyBodWggYW55ISBJIGtub3cuXG4gICAvLyBUaGlzIGlzIGEgdGVtcG9yYXJ5IGZpeCBmb3IgcHJpc21hIGNsaWVudC5cbiAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3ByaXNtYS9wcmlzbWEvaXNzdWVzLzE2MTE3XG4gICBhZGFwdGVyOiBQcmlzbWFBZGFwdGVyKGRiIGFzIGFueSksXG4gICBzZXNzaW9uOiB7XG4gICAgICBzdHJhdGVneTogJ2p3dCdcbiAgIH0sXG4gICBwYWdlczoge1xuICAgICAgc2lnbkluOiAnL2xvZ2luJ1xuICAgfSxcbiAgIHByb3ZpZGVyczogW1xuICAgICAgR2l0SHViUHJvdmlkZXIoe1xuICAgICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfSUQgfHwgJycsXG4gICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfU0VDUkVUIHx8ICcnXG4gICAgICB9KSxcbiAgICAgIC8qIEVtYWlsUHJvdmlkZXIoe1xuICAgICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuU01UUF9GUk9NLFxuICAgICAgICAgc2VuZFZlcmlmaWNhdGlvblJlcXVlc3Q6IGFzeW5jICh7IGlkZW50aWZpZXIsIHVybCwgcHJvdmlkZXIgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgZW1haWw6IGlkZW50aWZpZXJcbiAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWVcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUlkID0gdXNlcj8uZW1haWxWZXJpZmllZFxuICAgICAgICAgICAgICAgPyBwcm9jZXNzLmVudi5QT1NUTUFSS19TSUdOX0lOX1RFTVBMQVRFXG4gICAgICAgICAgICAgICA6IHByb2Nlc3MuZW52LlBPU1RNQVJLX0FDVElWQVRJT05fVEVNUExBVEU7XG4gICAgICAgICAgICBpZiAoIXRlbXBsYXRlSWQpIHtcbiAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyB0ZW1wbGF0ZSBpZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb3N0bWFya0NsaWVudC5zZW5kRW1haWxXaXRoVGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgVGVtcGxhdGVJZDogcGFyc2VJbnQodGVtcGxhdGVJZCksXG4gICAgICAgICAgICAgICBUbzogaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgIEZyb206IHByb3ZpZGVyLmZyb20gYXMgc3RyaW5nLFxuICAgICAgICAgICAgICAgVGVtcGxhdGVNb2RlbDoge1xuICAgICAgICAgICAgICAgICAgYWN0aW9uX3VybDogdXJsLFxuICAgICAgICAgICAgICAgICAgcHJvZHVjdF9uYW1lOiBzaXRlQ29uZmlnLm5hbWVcbiAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICBIZWFkZXJzOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhpcyB0byBwcmV2ZW50IEdtYWlsIGZyb20gdGhyZWFkaW5nIGVtYWlscy5cbiAgICAgICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMzQzNDExMC9mb3JjZS1lbWFpbHMtbm90LXRvLWJlLWdyb3VwZWQtaW50by1jb252ZXJzYXRpb25zLzI1NDM1NzIyLlxuICAgICAgICAgICAgICAgICAgICAgTmFtZTogJ1gtRW50aXR5LVJlZi1JRCcsXG4gICAgICAgICAgICAgICAgICAgICBWYWx1ZTogbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAnJ1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7IFxuXG4gICAgICAgICAgICBpZiAocmVzdWx0LkVycm9yQ29kZSkge1xuICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5NZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgIH0pICovXG4gICBdLFxuICAgY2FsbGJhY2tzOiB7XG4gICAgICBhc3luYyBzZXNzaW9uKHsgdG9rZW4sIHNlc3Npb24gfSkge1xuICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZDtcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5uYW1lID0gdG9rZW4ubmFtZTtcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5lbWFpbCA9IHRva2VuLmVtYWlsO1xuICAgICAgICAgICAgc2Vzc2lvbi51c2VyLmltYWdlID0gdG9rZW4ucGljdHVyZTtcbiAgICAgICAgIH1cblxuICAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgICB9LFxuICAgICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgZGIudXNlci5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgIGVtYWlsOiB0b2tlbi5lbWFpbFxuICAgICAgICAgICAgfVxuICAgICAgICAgfSk7XG5cbiAgICAgICAgIGlmICghZGJVc2VyKSB7XG4gICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgdG9rZW4uaWQgPSB1c2VyPy5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgIH1cblxuICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBkYlVzZXIuaWQsXG4gICAgICAgICAgICBuYW1lOiBkYlVzZXIubmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBkYlVzZXIuZW1haWwsXG4gICAgICAgICAgICBwaWN0dXJlOiBkYlVzZXIuaW1hZ2VcbiAgICAgICAgIH07XG4gICAgICB9XG4gICB9XG59O1xuIl0sIm5hbWVzIjpbIlByaXNtYUFkYXB0ZXIiLCJHaXRIdWJQcm92aWRlciIsImRiIiwiYXV0aE9wdGlvbnMiLCJhZGFwdGVyIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwicGFnZXMiLCJzaWduSW4iLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHSVRIVUJfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR0lUSFVCX0NMSUVOVF9TRUNSRVQiLCJjYWxsYmFja3MiLCJ0b2tlbiIsInVzZXIiLCJpZCIsIm5hbWUiLCJlbWFpbCIsImltYWdlIiwicGljdHVyZSIsImp3dCIsImRiVXNlciIsImZpbmRGaXJzdCIsIndoZXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"db\": () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nlet prisma;\nif (false) {} else {\n    if (!global.cachedPrisma) {\n        global.cachedPrisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n    }\n    prisma = global.cachedPrisma;\n}\nconst db = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBTzlDLElBQUlDO0FBQ0osSUFBSUMsS0FBeUIsRUFBYyxFQUUxQyxNQUFNO0lBQ0osSUFBSSxDQUFDQyxPQUFPQyxZQUFZLEVBQUU7UUFDdkJELE9BQU9DLFlBQVksR0FBRyxJQUFJSix3REFBWUE7SUFDekMsQ0FBQztJQUNEQyxTQUFTRSxPQUFPQyxZQUFZO0FBQy9CLENBQUM7QUFFTSxNQUFNQyxLQUFLSixPQUFPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGVudC1kYXNoYm9hcmQvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbiAgIHZhciBjYWNoZWRQcmlzbWE6IFByaXNtYUNsaWVudDtcbn1cblxubGV0IHByaXNtYTogUHJpc21hQ2xpZW50O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgIHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcbn0gZWxzZSB7XG4gICBpZiAoIWdsb2JhbC5jYWNoZWRQcmlzbWEpIHtcbiAgICAgIGdsb2JhbC5jYWNoZWRQcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG4gICB9XG4gICBwcmlzbWEgPSBnbG9iYWwuY2FjaGVkUHJpc21hO1xufVxuXG5leHBvcnQgY29uc3QgZGIgPSBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwicHJvY2VzcyIsImdsb2JhbCIsImNhY2hlZFByaXNtYSIsImRiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db.ts\n");

/***/ }),

/***/ "(api)/./lib/exceptions.ts":
/*!***************************!*\
  !*** ./lib/exceptions.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RequiresProPlanError\": () => (/* binding */ RequiresProPlanError)\n/* harmony export */ });\nclass RequiresProPlanError extends Error {\n    constructor(message = \"This action requires a pro plan\"){\n        super(message);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZXhjZXB0aW9ucy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsNkJBQTZCQztJQUN4Q0MsWUFBWUMsVUFBVSxpQ0FBaUMsQ0FBRTtRQUN2RCxLQUFLLENBQUNBO0lBQ1I7QUFDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGVudC1kYXNoYm9hcmQvLi9saWIvZXhjZXB0aW9ucy50cz85YzM2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBSZXF1aXJlc1Byb1BsYW5FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwiVGhpcyBhY3Rpb24gcmVxdWlyZXMgYSBwcm8gcGxhblwiKSB7XG4gICAgc3VwZXIobWVzc2FnZSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlJlcXVpcmVzUHJvUGxhbkVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/exceptions.ts\n");

/***/ }),

/***/ "(api)/./lib/subscription.ts":
/*!*****************************!*\
  !*** ./lib/subscription.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getUserSubscriptionPlan\": () => (/* binding */ getUserSubscriptionPlan)\n/* harmony export */ });\n/* harmony import */ var _config_subscriptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/subscriptions */ \"(api)/./config/subscriptions.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(api)/./lib/db.ts\");\n// @ts-nocheck\n// TODO: Fix this when we turn strict mode on.\n\n\nasync function getUserSubscriptionPlan(userId) {\n    const user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.user.findFirst({\n        where: {\n            id: userId\n        },\n        select: {\n            stripeSubscriptionId: true,\n            stripeCurrentPeriodEnd: true,\n            stripeCustomerId: true,\n            stripePriceId: true\n        }\n    });\n    if (!user) {\n        throw new Error(\"User not found\");\n    }\n    // Check if user is on a pro plan.\n    const isPro = user.stripePriceId && user.stripeCurrentPeriodEnd?.getTime() + 86400000 > Date.now();\n    const plan = isPro ? _config_subscriptions__WEBPACK_IMPORTED_MODULE_0__.proPlan : _config_subscriptions__WEBPACK_IMPORTED_MODULE_0__.freePlan;\n    return {\n        ...plan,\n        ...user,\n        stripeCurrentPeriodEnd: user.stripeCurrentPeriodEnd?.getTime(),\n        isPro\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3Vic2NyaXB0aW9uLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGNBQWM7QUFDZCw4Q0FBOEM7QUFFWTtBQUM3QjtBQUV0QixlQUFlRyx3QkFDcEJDLE1BQWMsRUFDaUI7SUFDL0IsTUFBTUMsT0FBTyxNQUFNSCxzREFBaUIsQ0FBQztRQUNuQ0ssT0FBTztZQUNMQyxJQUFJSjtRQUNOO1FBQ0FLLFFBQVE7WUFDTkMsc0JBQXNCLElBQUk7WUFDMUJDLHdCQUF3QixJQUFJO1lBQzVCQyxrQkFBa0IsSUFBSTtZQUN0QkMsZUFBZSxJQUFJO1FBQ3JCO0lBQ0Y7SUFFQSxJQUFJLENBQUNSLE1BQU07UUFDVCxNQUFNLElBQUlTLE1BQU0sa0JBQWlCO0lBQ25DLENBQUM7SUFFRCxrQ0FBa0M7SUFDbEMsTUFBTUMsUUFDSlYsS0FBS1EsYUFBYSxJQUNsQlIsS0FBS00sc0JBQXNCLEVBQUVLLFlBQVksV0FBYUMsS0FBS0MsR0FBRztJQUVoRSxNQUFNQyxPQUFPSixRQUFRZCwwREFBT0EsR0FBR0QsMkRBQVE7SUFFdkMsT0FBTztRQUNMLEdBQUdtQixJQUFJO1FBQ1AsR0FBR2QsSUFBSTtRQUNQTSx3QkFBd0JOLEtBQUtNLHNCQUFzQixFQUFFSztRQUNyREQ7SUFDRjtBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkZW50LWRhc2hib2FyZC8uL2xpYi9zdWJzY3JpcHRpb24udHM/MDQ0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gVE9ETzogRml4IHRoaXMgd2hlbiB3ZSB0dXJuIHN0cmljdCBtb2RlIG9uLlxuaW1wb3J0IHsgVXNlclN1YnNjcmlwdGlvblBsYW4gfSBmcm9tIFwidHlwZXNcIlxuaW1wb3J0IHsgZnJlZVBsYW4sIHByb1BsYW4gfSBmcm9tIFwiQC9jb25maWcvc3Vic2NyaXB0aW9uc1wiXG5pbXBvcnQgeyBkYiB9IGZyb20gXCJAL2xpYi9kYlwiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyU3Vic2NyaXB0aW9uUGxhbihcbiAgdXNlcklkOiBzdHJpbmdcbik6IFByb21pc2U8VXNlclN1YnNjcmlwdGlvblBsYW4+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnVzZXIuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHVzZXJJZCxcbiAgICB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgc3RyaXBlU3Vic2NyaXB0aW9uSWQ6IHRydWUsXG4gICAgICBzdHJpcGVDdXJyZW50UGVyaW9kRW5kOiB0cnVlLFxuICAgICAgc3RyaXBlQ3VzdG9tZXJJZDogdHJ1ZSxcbiAgICAgIHN0cmlwZVByaWNlSWQ6IHRydWUsXG4gICAgfSxcbiAgfSlcblxuICBpZiAoIXVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBmb3VuZFwiKVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdXNlciBpcyBvbiBhIHBybyBwbGFuLlxuICBjb25zdCBpc1BybyA9XG4gICAgdXNlci5zdHJpcGVQcmljZUlkICYmXG4gICAgdXNlci5zdHJpcGVDdXJyZW50UGVyaW9kRW5kPy5nZXRUaW1lKCkgKyA4Nl80MDBfMDAwID4gRGF0ZS5ub3coKVxuXG4gIGNvbnN0IHBsYW4gPSBpc1BybyA/IHByb1BsYW4gOiBmcmVlUGxhblxuXG4gIHJldHVybiB7XG4gICAgLi4ucGxhbixcbiAgICAuLi51c2VyLFxuICAgIHN0cmlwZUN1cnJlbnRQZXJpb2RFbmQ6IHVzZXIuc3RyaXBlQ3VycmVudFBlcmlvZEVuZD8uZ2V0VGltZSgpLFxuICAgIGlzUHJvLFxuICB9XG59XG4iXSwibmFtZXMiOlsiZnJlZVBsYW4iLCJwcm9QbGFuIiwiZGIiLCJnZXRVc2VyU3Vic2NyaXB0aW9uUGxhbiIsInVzZXJJZCIsInVzZXIiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsImlkIiwic2VsZWN0Iiwic3RyaXBlU3Vic2NyaXB0aW9uSWQiLCJzdHJpcGVDdXJyZW50UGVyaW9kRW5kIiwic3RyaXBlQ3VzdG9tZXJJZCIsInN0cmlwZVByaWNlSWQiLCJFcnJvciIsImlzUHJvIiwiZ2V0VGltZSIsIkRhdGUiLCJub3ciLCJwbGFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/subscription.ts\n");

/***/ }),

/***/ "(api)/./pages/api/posts/index.ts":
/*!**********************************!*\
  !*** ./pages/api/posts/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(zod__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_api_middlewares_with_methods__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/api-middlewares/with-methods */ \"(api)/./lib/api-middlewares/with-methods.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(api)/./lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/db */ \"(api)/./lib/db.ts\");\n/* harmony import */ var _lib_exceptions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/exceptions */ \"(api)/./lib/exceptions.ts\");\n/* harmony import */ var _lib_subscription__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/subscription */ \"(api)/./lib/subscription.ts\");\n\n\n\n\n\n\n\nconst postCreateSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n    content: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n});\nasync function handler(req, res) {\n    const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _lib_auth__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n    if (!session) {\n        return res.status(403).end();\n    }\n    const { user  } = session;\n    if (req.method === \"GET\") {\n        try {\n            const posts = await _lib_db__WEBPACK_IMPORTED_MODULE_4__.db.post.findMany({\n                select: {\n                    id: true,\n                    title: true,\n                    published: true,\n                    createdAt: true\n                },\n                where: {\n                    authorId: user.id\n                }\n            });\n            return res.json(posts);\n        } catch (error) {\n            return res.status(500).end();\n        }\n    }\n    if (req.method === \"POST\") {\n        try {\n            const subscriptionPlan = await (0,_lib_subscription__WEBPACK_IMPORTED_MODULE_6__.getUserSubscriptionPlan)(user.id);\n            // If user is on a free plan.\n            // Check if user has reached limit of 3 posts.\n            if (!subscriptionPlan?.isPro) {\n                const count = await _lib_db__WEBPACK_IMPORTED_MODULE_4__.db.post.count({\n                    where: {\n                        authorId: user.id\n                    }\n                });\n                if (count >= 3) {\n                    throw new _lib_exceptions__WEBPACK_IMPORTED_MODULE_5__.RequiresProPlanError();\n                }\n            }\n            const body = postCreateSchema.parse(req.body);\n            const post = await _lib_db__WEBPACK_IMPORTED_MODULE_4__.db.post.create({\n                data: {\n                    title: body.title,\n                    content: body.content,\n                    authorId: session.user.id\n                },\n                select: {\n                    id: true\n                }\n            });\n            return res.json(post);\n        } catch (error) {\n            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n                return res.status(422).json(error.issues);\n            }\n            if (error instanceof _lib_exceptions__WEBPACK_IMPORTED_MODULE_5__.RequiresProPlanError) {\n                return res.status(402).end();\n            }\n            return res.status(500).end();\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_api_middlewares_with_methods__WEBPACK_IMPORTED_MODULE_2__.withMethods)([\n    \"GET\",\n    \"POST\"\n], handler));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcG9zdHMvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNpRDtBQUN6QjtBQUV3QztBQUN4QjtBQUNYO0FBQzBCO0FBQ0s7QUFFNUQsTUFBTU8sbUJBQW1CTix1Q0FBUSxDQUFDO0lBQ2hDUSxPQUFPUix1Q0FBUTtJQUNmVSxTQUFTVix1Q0FBUSxHQUFHVyxRQUFRO0FBQzlCO0FBRUEsZUFBZUMsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0IsRUFBRTtJQUNoRSxNQUFNQyxVQUFVLE1BQU1oQixnRUFBZ0JBLENBQUNjLEtBQUtDLEtBQUtaLGtEQUFXQTtJQUU1RCxJQUFJLENBQUNhLFNBQVM7UUFDWixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsR0FBRztJQUM1QixDQUFDO0lBRUQsTUFBTSxFQUFFQyxLQUFJLEVBQUUsR0FBR0g7SUFFakIsSUFBSUYsSUFBSU0sTUFBTSxLQUFLLE9BQU87UUFDeEIsSUFBSTtZQUNGLE1BQU1DLFFBQVEsTUFBTWpCLHFEQUFnQixDQUFDO2dCQUNuQ29CLFFBQVE7b0JBQ05DLElBQUksSUFBSTtvQkFDUmhCLE9BQU8sSUFBSTtvQkFDWGlCLFdBQVcsSUFBSTtvQkFDZkMsV0FBVyxJQUFJO2dCQUNqQjtnQkFDQUMsT0FBTztvQkFDTEMsVUFBVVYsS0FBS00sRUFBRTtnQkFDbkI7WUFDRjtZQUVBLE9BQU9WLElBQUllLElBQUksQ0FBQ1Q7UUFDbEIsRUFBRSxPQUFPVSxPQUFPO1lBQ2QsT0FBT2hCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxHQUFHO1FBQzVCO0lBQ0YsQ0FBQztJQUVELElBQUlKLElBQUlNLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLElBQUk7WUFDRixNQUFNWSxtQkFBbUIsTUFBTTFCLDBFQUF1QkEsQ0FBQ2EsS0FBS00sRUFBRTtZQUU5RCw2QkFBNkI7WUFDN0IsOENBQThDO1lBQzlDLElBQUksQ0FBQ08sa0JBQWtCQyxPQUFPO2dCQUM1QixNQUFNQyxRQUFRLE1BQU05QixrREFBYSxDQUFDO29CQUNoQ3dCLE9BQU87d0JBQ0xDLFVBQVVWLEtBQUtNLEVBQUU7b0JBQ25CO2dCQUNGO2dCQUVBLElBQUlTLFNBQVMsR0FBRztvQkFDZCxNQUFNLElBQUk3QixpRUFBb0JBLEdBQUU7Z0JBQ2xDLENBQUM7WUFDSCxDQUFDO1lBRUQsTUFBTThCLE9BQU81QixpQkFBaUI2QixLQUFLLENBQUN0QixJQUFJcUIsSUFBSTtZQUU1QyxNQUFNYixPQUFPLE1BQU1sQixtREFBYyxDQUFDO2dCQUNoQ2tDLE1BQU07b0JBQ0o3QixPQUFPMEIsS0FBSzFCLEtBQUs7b0JBQ2pCRSxTQUFTd0IsS0FBS3hCLE9BQU87b0JBQ3JCa0IsVUFBVWIsUUFBUUcsSUFBSSxDQUFDTSxFQUFFO2dCQUMzQjtnQkFDQUQsUUFBUTtvQkFDTkMsSUFBSSxJQUFJO2dCQUNWO1lBQ0Y7WUFFQSxPQUFPVixJQUFJZSxJQUFJLENBQUNSO1FBQ2xCLEVBQUUsT0FBT1MsT0FBTztZQUNkLElBQUlBLGlCQUFpQjlCLHlDQUFVLEVBQUU7Z0JBQy9CLE9BQU9jLElBQUlFLE1BQU0sQ0FBQyxLQUFLYSxJQUFJLENBQUNDLE1BQU1TLE1BQU07WUFDMUMsQ0FBQztZQUVELElBQUlULGlCQUFpQjFCLGlFQUFvQkEsRUFBRTtnQkFDekMsT0FBT1UsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLEdBQUc7WUFDNUIsQ0FBQztZQUVELE9BQU9ILElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxHQUFHO1FBQzVCO0lBQ0YsQ0FBQztBQUNIO0FBRUEsaUVBQWVoQiw4RUFBV0EsQ0FBQztJQUFDO0lBQU87Q0FBTyxFQUFFVyxRQUFRQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGVudC1kYXNoYm9hcmQvLi9wYWdlcy9hcGkvcG9zdHMvaW5kZXgudHM/ZDI0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIlxuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGgvbmV4dFwiXG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIlxuXG5pbXBvcnQgeyB3aXRoTWV0aG9kcyB9IGZyb20gXCJAL2xpYi9hcGktbWlkZGxld2FyZXMvd2l0aC1tZXRob2RzXCJcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSBcIkAvbGliL2F1dGhcIlxuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9saWIvZGJcIlxuaW1wb3J0IHsgUmVxdWlyZXNQcm9QbGFuRXJyb3IgfSBmcm9tIFwiQC9saWIvZXhjZXB0aW9uc1wiXG5pbXBvcnQgeyBnZXRVc2VyU3Vic2NyaXB0aW9uUGxhbiB9IGZyb20gXCJAL2xpYi9zdWJzY3JpcHRpb25cIlxuXG5jb25zdCBwb3N0Q3JlYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICB0aXRsZTogei5zdHJpbmcoKSxcbiAgY29udGVudDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSlcblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcywgYXV0aE9wdGlvbnMpXG5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5lbmQoKVxuICB9XG5cbiAgY29uc3QgeyB1c2VyIH0gPSBzZXNzaW9uXG5cbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCBkYi5wb3N0LmZpbmRNYW55KHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgdGl0bGU6IHRydWUsXG4gICAgICAgICAgcHVibGlzaGVkOiB0cnVlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBhdXRob3JJZDogdXNlci5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiByZXMuanNvbihwb3N0cylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5lbmQoKVxuICAgIH1cbiAgfVxuXG4gIGlmIChyZXEubWV0aG9kID09PSBcIlBPU1RcIikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb25QbGFuID0gYXdhaXQgZ2V0VXNlclN1YnNjcmlwdGlvblBsYW4odXNlci5pZClcblxuICAgICAgLy8gSWYgdXNlciBpcyBvbiBhIGZyZWUgcGxhbi5cbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgaGFzIHJlYWNoZWQgbGltaXQgb2YgMyBwb3N0cy5cbiAgICAgIGlmICghc3Vic2NyaXB0aW9uUGxhbj8uaXNQcm8pIHtcbiAgICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBkYi5wb3N0LmNvdW50KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgYXV0aG9ySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoY291bnQgPj0gMykge1xuICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlc1Byb1BsYW5FcnJvcigpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgYm9keSA9IHBvc3RDcmVhdGVTY2hlbWEucGFyc2UocmVxLmJvZHkpXG5cbiAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBkYi5wb3N0LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0aXRsZTogYm9keS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBib2R5LmNvbnRlbnQsXG4gICAgICAgICAgYXV0aG9ySWQ6IHNlc3Npb24udXNlci5pZCxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gcmVzLmpzb24ocG9zdClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLmpzb24oZXJyb3IuaXNzdWVzKVxuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZXF1aXJlc1Byb1BsYW5FcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDIpLmVuZCgpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuZW5kKClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aE1ldGhvZHMoW1wiR0VUXCIsIFwiUE9TVFwiXSwgaGFuZGxlcilcbiJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwieiIsIndpdGhNZXRob2RzIiwiYXV0aE9wdGlvbnMiLCJkYiIsIlJlcXVpcmVzUHJvUGxhbkVycm9yIiwiZ2V0VXNlclN1YnNjcmlwdGlvblBsYW4iLCJwb3N0Q3JlYXRlU2NoZW1hIiwib2JqZWN0IiwidGl0bGUiLCJzdHJpbmciLCJjb250ZW50Iiwib3B0aW9uYWwiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsInN0YXR1cyIsImVuZCIsInVzZXIiLCJtZXRob2QiLCJwb3N0cyIsInBvc3QiLCJmaW5kTWFueSIsInNlbGVjdCIsImlkIiwicHVibGlzaGVkIiwiY3JlYXRlZEF0Iiwid2hlcmUiLCJhdXRob3JJZCIsImpzb24iLCJlcnJvciIsInN1YnNjcmlwdGlvblBsYW4iLCJpc1BybyIsImNvdW50IiwiYm9keSIsInBhcnNlIiwiY3JlYXRlIiwiZGF0YSIsIlpvZEVycm9yIiwiaXNzdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/posts/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/posts/index.ts"));
module.exports = __webpack_exports__;

})();